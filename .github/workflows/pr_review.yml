name: PR Discord Notification

on:
  pull_request:
    types: [opened, closed, reopened]

jobs:
  notify:
    runs-on: ubuntu-latest

    steps:
      - name: Send Discord Notification
        run: |
          
          # PR ì •ë³´ ê°€ì ¸ì˜¤ê¸°
          $prTitle = "${{ github.event.pull_request.title }}"
          $prUser = "${{ github.event.pull_request.user.login }}"
          $prAction = "${{ github.event.action }}"
          $prUrl = "${{ github.event.pull_request.html_url }}"
        
          if [ "$PR_ACTION" == "opened" ]; then
            MESSAGE="ğŸ“¢ ìƒˆë¡œìš´ PRì´ ë„ì°©í–ˆìŠµë‹ˆë‹¤!: **${PR_TITLE}** by ${PR_USER}.\nLink: ${PR_URL}"
          elif [ "$PR_ACTION" == "closed" ]; then
            MESSAGE="ğŸ“¢ PRì´ ë‹¤ì‹œ ì—´ë ¸ìŠµë‹ˆë‹¤!: **${PR_TITLE}** by ${PR_USER}.\nLink: ${PR_URL}"
          else
            MESSAGE="âœ… PR Merged!!: **${PR_TITLE}** by ${PR_USER}.\nLink: ${PR_URL}"
          fi
          
          curl -X POST -H 'Content-Type: application/json' \
          -d "$DATA" \
          ${{ secrets.DISCORD_WEBHOOK_URL }}
